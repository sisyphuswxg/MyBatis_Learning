




### 数据库配置文件

作用是：负责连接数据库

SqlMapConfig.xml配置文件（文件名可更改） ，其中配置了数据库驱动、数据库连接地址、数据库用户密码、事务管理等参数，
如果对数据库有性能的要求，还可以配置链接池的链接数和空闲时间等详细参数。

本项目中，配置文件在：`src/main/resources/SqlMapConfig.xml`

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>

    <!-- 和spring整合后 environments配置将废除-->
    <environments default="development">
        <environment id="development">
            <!-- 使用jdbc事务管理-->
            <transactionManager type="JDBC" />
            <!-- 数据库连接池-->
            <dataSource type="POOLED">
                <property name="driver" value="com.mysql.cj.jdbc.Driver"/>
                <property name="url" value="jdbc:mysql://localhost:3306/mybatis_test"/>
                <property name="username" value="root"/>
                <property name="password" value="sisyphuswxg"/>
            </dataSource>
        </environment>
    </environments>

    <mappers>
        <mapper resource="sqlmap/UserMapper.xml"/>
    </mappers>

</configuration>
```

注意：在MyBatis和Spring框架的整合中，将会使用Spring的配置，就不在需要单独配置数据库驱动了。


### 配置文件 配置项


> - 指定xml的版本信息和编码格式
> 
> ```xml
> <?xml version="1.0" encoding="UTF-8"?>
> ```


> - DTD
> 
> 文档定义类型 Document Type Definition
> 
> 是一种信息规范约束，作用是检验xml文件是否符合约定好的某种规范。
> 
> ```xml
> <!DOCTYPE configuration
>         PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
>         "http://mybatis.org/dtd/mybatis-3-config.dtd">
> <configuration>
> ```


> - configuration 
> 
> https://mybatis.org/mybatis-3/zh/configuration.html
> 
> 所有的配置信息都要包裹在<configuration>标签对中。是整个配置文件的顶级标签。


> - properties 属性
> 
> 可以引入外部配置的属性，也可以自己配置。
> 
> 该配置标签所在的同一个配置文件中的其他配置，均可引用该配置中的属性。
> 
> `<properties>`中也可以有`<property>`子标签，子标签中的值也可以被配置文件中的其他配置使用，属于一种全局参数。
> 
> 使用db.properties替换将数据库信息硬编码。(实用技巧！)
> 
> 注意：如果在db.properties和<property>中都配置了同一个key，优先使用<property>中的值。



> - settings
> 
> 全局配置参数。
> 是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。
> 
> 如：是否使用延迟加载、是否使用错误处理机制、可以设置最大并发请求数量、最大并发事务数量、是否启用命名空间等。
> 
> 有很多配置项，这里省略。
> 
> 常用来：实现缓存、延迟加载、分页设置。


> - typeAliases
> 
> 类型别名：用来设置一些类名，来代替java的长类型声明，如java.lang.int变为int，减少配置编码的冗余。
> 
> 一般会将JavaBean类型的封装类放在一个包下面，为了避免一个一个指定别名，MyBatis可直接指定包名，程序会自动为包下的所有包装类加上别名。
> 定义别名的规范是：对应包装类的类名首字母变为小写。
> 
> ```java
>    <typeAliases>
>        <package name="com.sisyphuswxg.book1.po"></package>
>    </typeAliases>
>```
> 
> 别名还可以通过添加注解@Alias来实现。
> ```java
> @Alias("user")
> public class User {
> ...
> }
> ```
> 
> MyBatis已经为Java的常见类型默认指定了别名，可以直接使用。


> typeHandlers 
>
> 类型处理器：将SQL中返回的数据库类型转换为相应的Java类型的处理器配置


> objectFactory 
>
> 对象工厂：实例化目标类的工厂类配置


> plugins
>
> 插件：可以通过插件修改MyBatis的核心行为，例如对语句执行的某一点进行拦截调用


> - environments
> 
> MyBatis的环境信息配置。
> 
> 可以配置多个environment标签，可以使MyBatis同时映射到多个数据库。
>
> 每一个单独的environment代表一个单独的数据库配置环境。
> 
> environment标签对中，
> 
> transactionManager配置的是MyBatis的事务控制器类型，有两种类型：JDBC和MANAGED。
> 
> 配置为JDBC：相当于直接使用JDBC的提交和回滚设置
> 配置为MANAGED：则不提交和回滚，而是由容器来管理事务的生命周期。在默认情况下，MANAGED会关闭连接，但是可以动态指定closeConnection参数，当设置为false时，在MANAGED下不会自动关闭链接。
> 
> dataSource配置的是数据库连接信息，其中包含多个property标签，用来配置驱动信息driver、连接地址url、用户名username、密码password。
> MyBatis有三种内建的数据源：UNPOOLED、POOLED、JNDI。
> UNPOOLED：每次请求时打开和关闭链接
> POOLED：可以设置一个管理数据库连接的资源池，用来合理控制数据库的连接和关闭次数，利用"池"的概念将JDBC连接对象组织起来
> JDNI：配置链接外部数据源（如服务器提供的数据源）


> mappers 
> 
> 映射器：配置SQL映射文件的位置，告知MyBatis去哪里加载SQL映射配置。
>
> 每一个`<mapper>`都是一个独立的Mapper映射配置文件。
> 
> 有一下几种配置方式：
> - 相对路径
> - 绝对路径
> - 接口信息
> - 接口所在包










